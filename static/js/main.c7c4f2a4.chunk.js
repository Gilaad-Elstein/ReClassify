(this.webpackJsonpreclassify=this.webpackJsonpreclassify||[]).push([[0],{19:function(e,t,n){e.exports=n(37)},30:function(e,t){},31:function(e,t){},32:function(e,t){},33:function(e,t){},34:function(e,t){},35:function(e,t){},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a,s=n(1),c=n.n(s),i=n(11),r=n.n(i),o=n(4),l=n.n(o),u=n(7),d=n(12),f=n(13),m=n(17),p=n(14),b=n(18),h=n(15),g=n(8),E=n(16),v=(n(36),E.a()),C=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).toggleRunning=function(){n.setState({Running:!n.state.Running}),n.state.Running||(n.setState({Prediction:"none"}),n.app())},n.requestReset=function(){n.setState({Reset:!0})},n.state={Prediction:"none",Confidence:0,Running:!0,Reset:!1},n.webcam=c.a.createRef(),n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.app()}},{key:"app",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,s,c,i,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Loading mobilenet.."),e.next=3,h.a();case 3:return a=e.sent,console.log("Successfully loaded model"),e.next=7,g.a.webcam(this.webcam.current);case 7:t=e.sent,n=function(){var e=Object(u.a)(l.a.mark((function e(n){var s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.capture();case 2:s=e.sent,c=a.infer(s,"conv_preds"),v.addExample(c,n),s.dispose();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),document.getElementById("class-a").addEventListener("click",(function(){return n(0)})),document.getElementById("class-b").addEventListener("click",(function(){return n(1)})),document.getElementById("class-c").addEventListener("click",(function(){return n(2)}));case 12:if(!this.state.Running){e.next=30;break}if(this.state.Reset&&(v.clearAllClasses(),this.setState({Confidence:0,Prediction:"none",Reset:!1})),!(v.getNumClasses()>0)){e.next=26;break}return e.next=17,t.capture();case 17:return s=e.sent,c=a.infer(s,"conv_preds"),e.next=21,v.predictClass(c);case 21:i=e.sent,r=["A","B","C"],console.log("prediction: "+r[i.label]+"\n probability: "+i.confidences[i.label]),this.setState({Prediction:r[i.label],Confidence:i.confidences[i.label]}),s.dispose();case 26:return e.next=28,g.b();case 28:e.next=12;break;case 30:this.setState({Prediction:"Model suspended.",Confidence:0});case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getConfidence",value:function(){return"Confidence: "+(this.state.Running?(100*this.state.Confidence).toFixed(0)+"%":" --- ")}},{key:"getPrediction",value:function(){return this.state.Running?"Prediction: "+this.state.Prediction:"Model suspended"}},{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header"},c.a.createElement("h1",null,"ReClassify"),c.a.createElement("h4",{className:"h4"},"On the fly image classification")),c.a.createElement("div",{className:"App-main"},c.a.createElement("video",{ref:this.webcam,autoPlay:!0,playsInline:!0,muted:!0,id:"webcam",width:"224",height:"224"}),c.a.createElement("label",{className:"label",htmlFor:"prediction"},this.state.Prediction,c.a.createElement("br",null),this.getConfidence()),c.a.createElement("div",{className:"buttons"},c.a.createElement("button",{id:"class-a"},"Class A"),"\xa0\xa0",c.a.createElement("button",{id:"class-b"},"Class B"),"\xa0\xa0",c.a.createElement("button",{id:"class-c"},"Class C")),c.a.createElement("br",null),c.a.createElement("button",{id:"toggleRunning",onClick:this.toggleRunning},"Start/Stop"),"\xa0\xa0",c.a.createElement("button",{id:"reset",onClick:this.requestReset},"Reset model")))}}]),t}(s.Component);r.a.render(c.a.createElement(C,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.c7c4f2a4.chunk.js.map