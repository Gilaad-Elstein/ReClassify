{"version":3,"sources":["img/camera.png","img/flipCamera.png","Popup.js","App.js","index.js"],"names":["module","exports","Popup","className","this","props","header","text","split","map","it","i","key","onClick","closePopup","React","Component","classifier","knnClassifier","App","_handleKeyDown","event","keyCode","toggleVideoCapture","toggleCameraMode","isBrowser","state","FacingMode","setState","Webcam","stop","maybeLoadWebcam","requestReset","Reset","A","B","C","document","getElementById","value","Prediction","Confidence","ModelRunning","VideoCapture","ShowPopup","webcamRef","createRef","force","tf","webcam","current","facingMode","addEventListener","InstallTrigger","alert","runModel","mobilenet","net","addExample","classId","a","capture","img","activation","infer","dispose","clearAllClasses","getNumClasses","setTimeout","predictClass","result","classes","label","confidences","toFixed","e","name","target","id","togglePopup","bind","ref","autoPlay","playsInline","muted","poster","videoLoadingImage","width","height","type","alt","src","cameraFlipIcon","htmlFor","getConfidence","style","textAlign","lineHeight","size","placeholder","onKeyUp","submitClassName","ReactDOM","render"],"mappings":"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","file":"static/js/main.29f956b5.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/flipCamera.e4276148.png\";","import React from 'react';  \nimport './App.css';\n\nclass Popup extends React.Component {  \n  render() {  \nreturn (  \n<div className='popup'>  \n<div className='popup\\_inner'>  \n<h1>{this.props.header}</h1>\n\n{this.props.text.split('~n').map( (it, i) => <div key={'x'+i}>{it}<br></br></div>)}\n\n<br></br><br></br>\n\n<button onClick={this.props.closePopup}>Got it</button>  \n<br></br><br></br>\n</div>  \n</div>  \n);  \n}  \n}  \n\nexport default Popup;","import React, { Component } from 'react';\nimport Popup from './Popup';  \nimport * as mobilenet from '@tensorflow-models/mobilenet';\nimport * as tf from '@tensorflow/tfjs'\nimport * as knnClassifier from '@tensorflow-models/knn-classifier';\nimport {\n  BrowserView,\n  MobileView,\n  isBrowser,\n  isMobile\n} from \"react-device-detect\";\n\nimport videoLoadingImage from './img/camera.png';\nimport cameraFlipIcon from './img/flipCamera.png';\nimport './App.css';\n\n\nconst classifier = knnClassifier.create();\n\nclass App extends Component {\n\n\n  constructor(props){\n    super(props);\n    this.state = {\n      Prediction: \"none\",\n      Confidence:  0,\n      ModelRunning: true,\n      VideoCapture: true,\n      Reset: false,\n      Webcam: null,\n      FacingMode: 'environment',\n      ShowPopup: true,\n      A: 'Class A',\n      B: 'Class B',\n      C: 'Class C'\n    }\n    this.webcamRef = React.createRef();\n  }\n\n  togglePopup() {  \n    this.setState({  \n         ShowPopup: !this.state.ShowPopup  \n    });  \n     }  \n\n\n  _handleKeyDown = (event) => {\n    var ESCAPE_KEY = 27;\n      switch( event.keyCode ) {\n          case ESCAPE_KEY:\n              this.toggleVideoCapture();\n              break;\n          default: \n              break;\n      }\n  }\n\n  toggleCameraMode = () => {\n    if (isBrowser){\n      return;\n    }\n    if(this.state.FacingMode === 'environment'){\n      this.setState({FacingMode: 'user'}, ()=>{\n        this.state.Webcam.stop();\n        this.maybeLoadWebcam(true);\n      });\n    }\n    else{\n      this.setState({FacingMode: 'environment'}, ()=>{\n        this.state.Webcam.stop();\n        this.maybeLoadWebcam(true);\n      });\n    }\n  }\n\n  async maybeLoadWebcam(force){\n    if (this.state.Webcam == null || force){\n      // Create an object from Tensorflow.js data API which could capture image \n      // from the web camera as Tensor.\n      const webcam = await tf.data.webcam(this.webcamRef.current, {facingMode: this.state.FacingMode});\n      this.setState({Webcam: webcam});\n      }\n      return this.state.Webcam;\n    }\n\n  async toggleVideoCapture(){\n  if(this.state.VideoCapture && this.state.Webcam !== null){\n    this.state.Webcam.stop();\n    this.setState({VideoCapture: false});\n  }\n  else{\n    const webcam = await tf.data.webcam(this.webcamRef.current);\n    this.setState({Webcam: webcam});\n    this.setState({VideoCapture: true});\n  }\n}\n\n  componentDidMount(){\n    document.addEventListener(\"keydown\", this._handleKeyDown);\n\n    if(typeof InstallTrigger !== 'undefined'){\n      alert(\"This demo does not currently support firefox.\\r\\nWe recommended running it in Chrome instead.\");\n      this.setState({Prediction: \"This demo  does not currently support firefox.\"});\n    }\n    else{\n      this.runModel();\n    }\n  }\n\n  async runModel() {\n    var net;\n    try {\n      net = await mobilenet.load();\n    }\n    catch{\n      alert(\"Failed to load model. Are you online?\\r\\nRefresh to try again.\")\n      return;\n    }\n    if(this.state.Webcam == null){\n      await this.maybeLoadWebcam();\n    }\n    // Reads an image from the webcam and associates it with a specific class\n    // index.\n    const addExample = async classId => {\n      if (this.state.VideoCapture){\n    // Capture an image from the web camera.\n    const img = await this.state.Webcam.capture();\n      \n    // Get the intermediate activation of MobileNet 'conv_preds' and pass that\n    // to the KNN classifier.\n    const activation = net.infer(img, 'conv_preds');\n\n    // Pass the intermediate activation to the classifier.\n    classifier.addExample(activation, classId);\n\n    // Dispose the tensor to release the memory.\n    img.dispose();\n      }\n    };\n  \n    // When clicking a button, add an example for that class.\n    document.getElementById('class-a').addEventListener('click', () => addExample(0));\n    document.getElementById('class-b').addEventListener('click', () => addExample(1));\n    document.getElementById('class-c').addEventListener('click', () => addExample(2));\n  \n    while (this.state.ModelRunning) {\n      if (this.state.Reset){\n        classifier.clearAllClasses();\n        this.setState({Confidence: 0, Prediction: \"none\", Reset: false});\n      }\n      if (classifier.getNumClasses() > 0 && this.state.VideoCapture) {\n        const img = await this.state.Webcam.capture();\n        \n        // Get the activation from mobilenet from the webcam.\n        var activation;\n        try{\n          activation = net.infer(img, 'conv_preds');\n        }\n        catch{\n          setTimeout(() => {\n            this.runModel();\n          }, 1000);\n          return;\n        }\n        // Get the most likely class and confidence from the classifier module.\n        const result = await classifier.predictClass(activation);\n  \n        const classes = [this.state.A, this.state.B, this.state.C];\n        //console.log(\"prediction: \" + classes[result.label] + \"\\n probability: \" + result.confidences[result.label]);\n        this.setState({Prediction: classes[result.label], Confidence: result.confidences[result.label]})\n        // Dispose the tensor to release the memory.\n        img.dispose();\n      }\n  \n      await tf.nextFrame();\n    }\n    this.setState({Prediction: \"Model suspended.\", Confidence: 0});\n  }\n\n  getConfidence(){\n    return \"Confidence: \" +  (this.state.ModelRunning ? \n            (this.state.Confidence * 100).toFixed(0) + \"%\" : \" --- \");\n  }\n\n  getPrediction(){\n    return this.state.ModelRunning ? \n    \"Prediction: \" + (this.state.Prediction) : \"Model suspended\";\n  }\n \n  requestReset = () => {\n    this.setState({Reset: true, A: 'Class A', B: 'Class B', C: 'Class C'});\n    document.getElementById('class-name-A').value = '';\n    document.getElementById('class-name-B').value = '';\n    document.getElementById('class-name-C').value = '';\n\n  }\n\n  submitClassName(e){\n    var name;\n    switch(e.target.id){\n      case 'class-name-A':\n        name = document.getElementById('class-name-A').value;\n        this.setState({A: name})\n        if (name === ''){\n          this.setState({A: 'Class A'});\n        }\n        break;\n      case 'class-name-B':\n        name = document.getElementById('class-name-B').value;\n        this.setState({B: name})\n        if (name === ''){\n          this.setState({B: 'Class B'});\n        }\n        break;\n      case 'class-name-C':\n        name = document.getElementById('class-name-C').value;\n        this.setState({C: name})\n        if (name === ''){\n          this.setState({C: 'Class C'});\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  render() {\n    return(\n    <div className=\"App\">\n      \n      <header className=\"App-header\">\n      {this.state.ShowPopup ?  \n        <Popup  \n          header='ReClassify'\n          text=\"Reclassify is an on the fly image classifier.~n\n\n          It can learn to tell the difference between facial\n          expressions such as a smile or a frown, it can tell\n          genders apart, differentiate hand gestures or classify\n          inanimate objects with as little as 5-10 training examples per class.~n~n\n         \n          Point your camera at an object or scene and\n          click one of the class buttons.~n~n\n          \n          Every time you click a class button, ReClassify learns to associate\n          what it sees with that class.~n~n\n          \n          Try taking different perspectives on the object\n          to maximize the model's confidence.~n\n          Use the text boxes to name your classes.~n~n\n         \n          Repeat with a different object or scene and \n          a different class button.~n~n\n          \n          When you are done simply point your camera at an\n          object of one of the classes and see the model's\n          prediction. The more you click, the better it predicts!~n~n\n          \n          Enjoy!\"\n          closePopup={this.togglePopup.bind(this)}  \n        />  \n        : null  \n        } \n      <h1>ReClassify</h1>\n      <h4 className=\"h4\">On the fly image classification</h4>\n\n      </header>\n      <div className=\"App-main\">\n\n      <video ref={this.webcamRef}\n        autoPlay\n        playsInline \n        muted \n        id=\"webcam\"\n        poster={videoLoadingImage}\n        width=\"224\" \n        height=\"224\">\n      </video>\n\n      <MobileView>\n      <div><input className=\"label\" type=\"image\" alt=\"&#8635;\" width={50} height={50} id=\"toggleCameraMode\" onClick={this.toggleCameraMode} src={cameraFlipIcon}></input></div>\n      </MobileView>\n\n      <label className=\"label\" htmlFor=\"prediction\">{this.state.Prediction}<br></br>{this.getConfidence()}</label>\n      <div className=\"buttons\">\n      <p><button id=\"class-a\" >{this.state.A}</button>&nbsp;&nbsp;\n      <button id=\"class-b\">{this.state.B}</button>&nbsp;&nbsp;\n      <button id=\"class-c\">{this.state.C}</button></p></div>\n      <div style={{textAlign: \"center\", lineHeight: 1.8}}>\n      <input size={10} type=\"text\" id=\"class-name-A\" placeholder={this.state.A} onKeyUp={this.submitClassName.bind(this)}></input>&nbsp;&nbsp;\n      <input size={10} type=\"text\" id=\"class-name-B\" placeholder={this.state.B} onKeyUp={this.submitClassName.bind(this)}></input>&nbsp;&nbsp;\n      <input size={10} type=\"text\" id=\"class-name-C\" placeholder={this.state.C} onKeyUp={this.submitClassName.bind(this)}></input>&nbsp;&nbsp;\n      </div>\n      <br></br>\n      <button id=\"reset\" onClick={this.requestReset}>Reset model</button>  \n\n      </div>\n    </div>\n  );\n}\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render( < App / > , document.getElementById('root'));"],"sourceRoot":""}